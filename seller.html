<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>‡∏´‡∏ô‡πâ‡∏≤‡∏£‡πâ‡∏≤‡∏ô‡πÅ‡∏°‡πà‡∏Ñ‡πâ‡∏≤</title>

<style>
body{
    font-family:Arial;
    background:#f4f4f4;
}

.header{
    background:#2e7d32;
    color:white;
    padding:15px;
    text-align:center;
    font-size:20px;
}

.container{
    max-width:600px;
    margin:20px auto;
    background:white;
    padding:20px;
    border-radius:12px;
}

.order{
    border-bottom:2px solid #ddd;
    padding:12px;
    margin-bottom:10px;
}

.item{
    background:#f9f9f9;
    padding:8px;
    margin-top:6px;
    border-radius:8px;
}
</style>
</head>

<body>

<div class="header" style="display:flex; justify-content:space-between; align-items:center;">

<button onclick="goindex()" style="
background:white;
border:none;
padding:6px 12px;
border-radius:6px;
cursor:pointer;
font-weight:bold;">
üè† ‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å
</button>

<div>üë®‚Äçüç≥ ‡∏´‡∏ô‡πâ‡∏≤‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤</div>

</div>

<div class="container">
<div style="text-align:right;margin-bottom:10px;">
<button onclick="resetOrders()" style="
background:#d32f2f;
color:white;
border:none;
padding:8px 14px;
border-radius:8px;
cursor:pointer;
font-weight:bold;">
üóë ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå
</button>
</div>

<div id="orderList">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå</div>
</div>

<script>

function loadOrders(){

    let orders = JSON.parse(localStorage.getItem("orders")) || [];

    let html="";

    // üî• ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡∏Ç‡∏∂‡πâ‡∏ô‡∏ö‡∏ô
    let reversed = [...orders].reverse();

    reversed.forEach((order,index)=>{

        // ‡πÄ‡∏•‡∏Ç‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå (‡∏ô‡∏±‡∏ö‡∏à‡∏≤‡∏Å‡∏•‡πà‡∏≤‡∏á‡∏Ç‡∏∂‡πâ‡∏ô‡∏ö‡∏ô)
        let orderNumber = orders.length - index;

        html += `<div class="order">
        üì¶ ‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏ó‡∏µ‡πà: <b>${orderNumber}</b><br>
        üïí ‡πÄ‡∏ß‡∏•‡∏≤: ${order.time}<br>`;

        order.items.forEach(item=>{

            html += `
            <div class="item">
                <b>${item.name}</b><br>
                üßã ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó: ${item.type || "-"}<br>
                üç¨ ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏ß‡∏≤‡∏ô: ${item.sweet || "-"}<br>
                üí∞ ‡∏£‡∏≤‡∏Ñ‡∏≤: ${item.price || 0} ‡∏ö‡∏≤‡∏ó<br>
                üî¢ ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô: ${item.qty || 0}<br>
                ‚úÖ ‡∏£‡∏ß‡∏°: ${item.sum || 0} ‡∏ö‡∏≤‡∏ó
            </div>
            `;
        });

        html += `
        <div style="text-align:right;font-weight:bold;margin-top:8px;">
            üíµ ‡∏¢‡∏≠‡∏î‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå: ${order.total} ‡∏ö‡∏≤‡∏ó
        </div>
        </div>`;
    });

    document.getElementById("orderList").innerHTML =
        html || "‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå";
}

// ‡πÇ‡∏´‡∏•‡∏î‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å
loadOrders();

// ‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
setInterval(loadOrders,3000);


// ‚úÖ ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå
function resetOrders(){

    if(confirm("‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÉ‡∏ä‡πà‡πÑ‡∏´‡∏° ?")){
        localStorage.removeItem("orders");
        loadOrders();
    }
}

function goindex(){
    window.location.href="index.html";
}

</script>

</body>
</html>
