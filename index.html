<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport"
content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<title>‡∏£‡πâ‡∏≤‡∏ô‡∏£‡∏¥‡∏°‡∏ó‡∏∏‡πà‡∏á</title>

<style>
*{box-sizing:border-box}
.cart-box{
display:none;
}
.cart-title{
  display: none;
}
.order-btn{display: none;}
.cartList{display: none;}
.cartSummary{display: none;}
/* .list{display: none;} */
body{
margin:0;
font-family:sans-serif;
background:#fefefe;
padding-top:55px;
padding-bottom:20px;
}

/* HEADER */
.header{
position:fixed;
top:0;left:0;right:0;
background:linear-gradient(135deg,#43a047,#8bc34a);
color:white;
display:flex;
align-items:center;
justify-content:space-between;
padding:6px 10px;
font-size:14px;
z-index:1000;
}

.header-left,
.header-center,
.header-right{
display:flex;
align-items:center;
gap:6px;
}

.header-center{
font-weight:bold;
flex:1;
justify-content:center;
font-size:21px;
}

.header button{
border:none;
border-radius:6px;
padding:3px 3px;
cursor:pointer;
font-size:11px;
}

.seller-input{
padding:3px 5px;
border-radius:3px;
border:none;

font-size:16px;          /* ‚≠ê ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏à‡∏≤‡∏Å 11 ‚Üí 16 (‡∏Å‡∏±‡∏ô zoom ‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠) */
width:50px;

transform:scale(0.7);   /* ‚≠ê ‡∏¢‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏î‡∏π‡πÄ‡∏•‡πá‡∏Å‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏° */
transform-origin:left center;
margin-right:-10px;      /* ‚≠ê ‡∏ä‡∏î‡πÄ‡∏ä‡∏¢‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡πÄ‡∏ö‡∏µ‡∏¢‡∏î */
}


/* ‚úÖ ‡∏õ‡∏∏‡πà‡∏°‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡πÉ‡∏ô Header */
.cart-header{
background:white;
color:#2e7d32;
padding:4px 6px;
border-radius:20px;
font-weight:bold;
cursor:pointer;
margin-left:6px;
}

/* CART BOX (‡∏Ç‡∏≠‡∏á‡πÄ‡∏î‡∏¥‡∏° ‡πÑ‡∏°‡πà‡πÅ‡∏Å‡πâ) */
.cart-box{
position:fixed;
top:90px;
right:8px;
background:white;
width:260px;
max-height:75vh;
overflow:auto;
border-radius:14px;
box-shadow:0 4px 10px rgba(0,0,0,.25);
padding:8px;
font-size:12px;
z-index:1200;
}

.cart-title{
font-weight:bold;
text-align:center;
margin-bottom:6px;
}

.cart-item{
border-bottom:1px dashed #ccc;
padding:6px 0;
}

.cart-name{font-weight:bold}

.cart-detail{
font-size:11px;
color:#555;
}

.qty{
display:flex;
justify-content:flex-end;
gap:4px;
margin-top:4px;
}

.qty button{
border:none;
background:#4CAF50;
color:white;
border-radius:6px;
padding:2px 6px;
font-size:12px;
cursor:pointer;
}

.qty button.minus{background:#e53935}

.cart-summary{
margin-top:6px;
font-weight:bold;
text-align:center;
}

.order-btn{
width:100%;
margin-top:6px;
padding:8px;
border:none;
border-radius:10px;
background:#ff9800;
color:white;
font-size:13px;
cursor:pointer;
}

/* MENU */
.card{
background:white;
margin:10px;
border-radius:14px;
overflow:hidden;
box-shadow:0 3px 6px rgba(0,0,0,.15);
}

.index{
display:flex;
align-items:center;
padding:10px;
cursor:pointer;
}

.index img{
width:60px;
height:60px;
border-radius:10px;
object-fit:cover;
}

.index div{
margin-left:10px;
flex:1;
font-size:14px;
}

.panel{
display:none;
padding:10px;
border-top:1px solid #ddd;
font-size:12px;
}

.block{
border:1px solid #aaa;
padding:5px 10px;
border-radius:14px;
margin:3px;
display:inline-block;
cursor:pointer;
}

.block.active{
background:#4CAF50;
color:white;
border-color:#4CAF50;
}

.block.disabled{
opacity:.4;
pointer-events:none;
}

button.add{
width:100%;
padding:8px;
border:none;
border-radius:12px;
background:#2196F3;
color:white;
margin-top:6px;
font-size:13px;
}
</style>
</head>

<body>

<div class="header">

<div class="header-left">
<!-- <button onclick="goHome()">üè†</button> -->
<div class="header-right">
<div style="font-size:12px;">üîí ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤</div>
<input type="password" id="sellerPass" class="seller-input" placeholder="‡πÉ‡∏™‡πà‡∏£‡∏´‡∏±‡∏™">
<button onclick="sellerLogin()">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô</button>
</div>
</div>

<div class="header-center">
‡∏£‡πâ‡∏≤‡∏ô‡∏£‡∏¥‡∏°‡∏ó‡∏∏‡πà‡∏á
</div>

<!-- ‚úÖ ‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà -->
<div class="cart-header" onclick="openPopup()">
üõí <span id="cartCount">0</span>
</div>
</div>
<!-- ===== POPUP CART ===== -->
<div id="cartPopup" style="
display:none;
position:fixed;
top:0;left:0;
width:100%;height:100%;
background:rgba(0,0,0,.5);
z-index:2000;
">

<div style="
background:white;
width:90%;
max-width:420px;
margin:80px auto;
border-radius:14px;
padding:15px;
max-height:75vh;
overflow:auto;
">

<h3 style="text-align:center;margin-top:0">üß∫ ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏ô‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤</h3>

<div id="popupCartList"></div>

<div id="popupSummary"
style="font-weight:bold;text-align:center;margin-top:10px;">
</div>

<button onclick="goOrder()" style="
width:100%;
padding:12px;
background:#ff9800;
border:none;
border-radius:10px;
color:white;
font-size:16px;
margin-top:10px;
">
üí≥ ‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô
</button>

<button onclick="closePopup()" style="width:100%;margin-top:6px;">
‚ùå ‡∏õ‡∏¥‡∏î
</button>

</div>

<div class="cart-box">

</div>

</div>
<div class="cart-title">üß∫ ‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤</div>
<div id="cartList"></div>
<div id="cartSummary" class="cart-summary"></div>
<button class="order-btn" onclick="goOrder()">üõí ‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</button>

<div id="list"></div>
<style>
#cartList,
#cartSummary{
    display: none;
}
</style>
<script>
/* ===== POPUP CART ===== */

function openPopup(){

renderPopupCart();

document.getElementById("cartPopup").style.display="block";
}
function renderPopupCart(){

const box=document.getElementById("popupCartList");
const sum=document.getElementById("popupSummary");

box.innerHTML="";

let tq=0,tp=0;

Object.entries(cart).forEach(([key,i])=>{

tq+=i.qty;
tp+=i.qty*i.price;

box.innerHTML+=`
<div style="
border-bottom:1px dashed #ccc;
padding:8px 0;
">

<b>${i.name}</b><br>
‡∏´‡∏ß‡∏≤‡∏ô ${i.sweet} ‚Ä¢ ${i.type}<br>
${i.qty} x ${i.price} ‡∏ö‡∏≤‡∏ó

<div style="
display:flex;
justify-content:flex-end;
gap:6px;
margin-top:6px;
">

<button onclick="change('${key}',-1)">‚ûñ</button>
<button onclick="change('${key}',1)">‚ûï</button>

</div>

</div>`;
});

sum.innerHTML = tq
? `‡∏£‡∏ß‡∏° ${tq} ‡πÅ‡∏Å‡πâ‡∏ß<br>‡∏£‡∏ß‡∏° ${tp} ‡∏ö‡∏≤‡∏ó`
: "‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏ô‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤";
}


function closePopup(){
document.getElementById("cartPopup").style.display="none";
}

/* ===== DATA ===== */
const indexs=[
["‡∏ä‡∏≤‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß",25,"images/chageen.jpg"],
["‡∏ä‡∏≤‡πÑ‡∏ó‡∏¢",25,"images/chathai.jpg"],
["‡πÇ‡∏Å‡πÇ‡∏Å‡πâ",25,"images/cocoa.jpg"],
["‡∏ô‡∏°‡∏™‡∏î",25,"images/nom.jpg"],
["‡πÇ‡∏≠‡∏£‡∏¥‡πÇ‡∏≠‡πâ‡∏ô‡∏°‡∏™‡∏î‡∏õ‡∏±‡πà‡∏ô",30,"images/oreo.jpg"],
["‡∏ä‡∏≤‡∏î‡∏≥‡πÄ‡∏¢‡πá‡∏ô",25,"images/chadang.jpg"],
["‡πÇ‡∏≠‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á",25,"images/ole.jpg"],
["‡∏Å‡∏≤‡πÅ‡∏ü‡πÄ‡∏ô‡∏™",25,"images/ness-coffee.jpg"],
["‡∏Å‡∏≤‡πÅ‡∏ü‡∏î‡∏≥",25,"images/dark-coffee.jpg"],
["‡πÄ‡∏ú‡∏∑‡∏≠‡∏Å",25,"images/cold-taro.jpg"],
["‡πÅ‡∏Ñ‡∏ô‡∏ï‡∏≤‡∏•‡∏π‡∏õ",25,"images/cantaloupe.jpg"],
["‡πÇ‡∏≠‡∏ß‡∏±‡∏•‡∏ï‡∏¥‡∏ô",25,"images/ovaltine.jpg"],
["‡πÅ‡∏î‡∏á‡πÇ‡∏ã‡∏î‡∏≤",25,"images/red-soda.jpg"],
["‡πÅ‡∏î‡∏á‡πÇ‡∏ã‡∏î‡∏≤‡∏°‡∏∞‡∏ô‡∏≤‡∏ß",25,"images/red-lemon-soda.jpg"],
["‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡πÇ‡∏ã‡∏î‡∏≤",25,"images/green-soda.jpg"],
["‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡πÇ‡∏ã‡∏î‡∏≤‡∏°‡∏∞‡∏ô‡∏≤‡∏ß",25,"images/green-lime-soda.jpg"],
["‡∏ö‡∏•‡∏π‡∏Æ‡∏≤‡∏ß‡∏≤‡∏¢",25,"images/blue-hawaii.jpg"],
["‡∏ö‡∏•‡∏π‡∏Æ‡∏≤‡∏ß‡∏≤‡∏¢‡πÇ‡∏ã‡∏î‡∏≤",25,"images/blue-hawaii-soda.jpg"],
["‡πÅ‡∏≠‡∏õ‡πÄ‡∏ö‡∏¥‡πâ‡∏•‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß",25,"images/green-apple.jpg"],
["‡πÅ‡∏≠‡∏õ‡πÄ‡∏ö‡∏¥‡πâ‡∏•‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡πÇ‡∏ã‡∏î‡∏≤",25,"images/green-apple-soda.jpg"],
["‡∏°‡∏∞‡∏û‡∏£‡πâ‡∏≤‡∏ß",25,"images/coconut.jpg"],
["‡∏°‡∏∞‡∏û‡∏£‡πâ‡∏≤‡∏ß‡∏ô‡∏°‡∏™‡∏î",25,"images/fresh-coconut-milk.jpg"],
["‡∏™‡∏ï‡∏≠‡πÄ‡∏ö‡∏≠‡∏£‡∏µ‡πà",25,"images/strawberry.jpg"],
["‡∏™‡∏ï‡∏≠‡πÄ‡∏ö‡∏≠‡∏£‡∏µ‡πà‡πÇ‡∏ã‡∏î‡∏≤",25,"images/strawberry-soda.jpg"]
];

const sweets=["0%","25%","50%","75%","100%","125%"];
let cart={};
const list=document.getElementById("list");

/* ===== MENU ===== */
indexs.forEach(m=>{
const oreo=m[0]==="‡πÇ‡∏≠‡∏£‡∏¥‡πÇ‡∏≠‡πâ‡∏ô‡∏°‡∏™‡∏î‡∏õ‡∏±‡πà‡∏ô";

list.innerHTML+=`
<div class="card">
<div class="index" onclick="toggle(this)">
<img src="${m[2]}">
<div><b>${m[0]}</b><br>${m[1]} ‡∏ö‡∏≤‡∏ó</div>
</div>

<div class="panel">
<b>‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏ß‡∏≤‡∏ô</b><br>
${sweets.map(s=>`<span class="block sweet" onclick="pick(this,'sweet')">${s}</span>`).join("")}
<br><br><b>‡∏ä‡∏ô‡∏¥‡∏î</b><br>
<span class="block type" onclick="pick(this,'type')">‡πÄ‡∏¢‡πá‡∏ô</span>
<span class="block type ${oreo?'disabled':''}" onclick="pick(this,'type')">‡πÅ‡∏¢‡∏Å‡∏ô‡πâ‡∏≥</span>
<span class="block type ${oreo?'disabled':''}" data-extra="5" onclick="pick(this,'type')">‡∏õ‡∏±‡πà‡∏ô +5</span>

<button class="add" onclick="addItem(this,'${m[0]}',${m[1]})">‡πÄ‡∏û‡∏¥‡πà‡∏°</button>
</div>
</div>`;
});

function toggle(index){
document.querySelectorAll(".panel").forEach(p=>{
if(p!==index.nextElementSibling){
p.style.display="none";
p.querySelectorAll(".block").forEach(b=>b.classList.remove("active"));
}});
const panel=index.nextElementSibling;
panel.style.display=panel.style.display==="block"?"none":"block";
}

function pick(el,type){

if(el.classList.contains("disabled")) return;

const p = el.closest(".panel");

/* ‚≠ê ‡∏ñ‡πâ‡∏≤‡∏Å‡∏î‡∏ï‡∏±‡∏ß‡πÄ‡∏î‡∏¥‡∏° ‚Üí ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å */
if(el.classList.contains("active")){
    el.classList.remove("active");
    return;
}

/* ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡∏•‡∏∞‡∏≠‡∏±‡∏ô */
p.querySelectorAll("."+type)
 .forEach(b=>b.classList.remove("active"));

el.classList.add("active");
}


function addItem(btn,name,price){
const p=btn.parentElement;
const sweet=p.querySelector(".sweet.active");
const type=p.querySelector(".type.active");
if(!sweet||!type) return;

const extra=type.dataset.extra?Number(type.dataset.extra):0;
const totalPrice=price+extra;

const key=name+"|"+sweet.textContent+"|"+type.textContent;
cart[key] ??= {name,sweet:sweet.textContent,type:type.textContent,price:totalPrice,qty:0};
cart[key].qty++;

renderCart();
}
function addItem(btn,name,price){

const p=btn.parentElement;
const sweet=p.querySelector(".sweet.active");
const type=p.querySelector(".type.active");
if(!sweet||!type) return;

const extra=type.dataset.extra?Number(type.dataset.extra):0;
const totalPrice=price+extra;

const key=name+"|"+sweet.textContent+"|"+type.textContent;
cart[key] ??= {name,sweet:sweet.textContent,type:type.textContent,price:totalPrice,qty:0};
cart[key].qty++;

renderCart();

/* ‚≠ê ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏≠‡∏¢‡∏π‡πà‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ */
p.style.display="none";
p.querySelectorAll(".block").forEach(b=>b.classList.remove("active"));
}

/* ===== CART ===== */
function change(key,val){
cart[key].qty+=val;
if(cart[key].qty<=0) delete cart[key];
renderCart();
renderPopupCart();

}

function renderCart(){
const box=document.getElementById("cartList");
const sum=document.getElementById("cartSummary");
// box.innerHTML="";
let tq=0,tp=0;

Object.values(cart).forEach(i=>{
tq+=i.qty;
tp+=i.qty*i.price;

box.innerHTML+=`
<div class="cart-item">
<div class="cart-name">${i.name}</div>
<div class="cart-detail">‡∏´‡∏ß‡∏≤‡∏ô ${i.sweet} ‚Ä¢ ${i.type}</div>
<div class="cart-detail">${i.qty} x ${i.price} ‡∏ö‡∏≤‡∏ó</div>
<div class="qty">
<button class="minus" onclick="change('${i.name}|${i.sweet}|${i.type}',-1)">‚ûñ</button>
<button onclick="change('${i.name}|${i.sweet}|${i.type}',1)">‚ûï</button>
</div>
</div>`;
});

sum.innerHTML=tq?`‡∏£‡∏ß‡∏° ${tq} ‡πÅ‡∏Å‡πâ‡∏ß<br>‡∏£‡∏ß‡∏° ${tp} ‡∏ö‡∏≤‡∏ó`:"";

/* ‚úÖ ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÄ‡∏•‡∏Ç‡∏ö‡∏ô Header */
document.getElementById("cartCount").innerText=tq;
}

/* ===== SYSTEM ===== */
function sellerLogin(){
const pass=document.getElementById("sellerPass").value;
if(pass==="1234"){
localStorage.setItem("role","seller");
window.location.href="seller.html";
}else alert("‡∏£‡∏´‡∏±‡∏™‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á");
}

function goHome(){
window.scrollTo({top:0,behavior:"smooth"});
}

function goOrder(){
localStorage.setItem("cart",JSON.stringify(cart));
window.location.href="order.html";
}

</script>
</body>
</html>
